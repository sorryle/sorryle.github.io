---
layout: post
title: 计算机网络原理的学习笔记汇总
category: 自考计算机科学与技术
tags: [计算机网络原理]
excerpt: 计算机网络原理的学习笔记汇总
typora-root-url: ..
---

 



## 错题

![image-20220831151925098](/../assets/images/2021/2022-08-24-network/image-20220831151925098.png)



![image-20220831152009438](/../assets/images/2021/2022-08-24-network/image-20220831152009438.png)



![image-20220831152018859](/../assets/images/2021/2022-08-24-network/image-20220831152018859.png)



![image-20220831152032378](/../assets/images/2021/2022-08-24-network/image-20220831152032378.png)



![image-20220831152049753](/../assets/images/2021/2022-08-24-network/image-20220831152049753.png)



![image-20220831152059868](/../assets/images/2021/2022-08-24-network/image-20220831152059868.png)



![image-20220831152112496](/../assets/images/2021/2022-08-24-network/image-20220831152112496.png)



![image-20220831152128524](/../assets/images/2021/2022-08-24-network/image-20220831152128524.png)



![image-20220831152138539](/../assets/images/2021/2022-08-24-network/image-20220831152138539.png)



![image-20220831152306531](/../assets/images/2021/2022-08-24-network/image-20220831152306531.png)



![image-20220831152318767](/../assets/images/2021/2022-08-24-network/image-20220831152318767.png)





![image-20220831174008889](/../assets/images/2021/2022-08-24-network/image-20220831174008889.png)



![image-20220831174727928](/../assets/images/2021/2022-08-24-network/image-20220831174727928.png)



![image-20220831174933362](/../assets/images/2021/2022-08-24-network/image-20220831174933362.png)





![image-20220831175124745](/../assets/images/2021/2022-08-24-network/image-20220831175124745.png)











## 计算机网络概述



**协议定义**

> 协议是网络通信实体之间在数据交换过程中需要遵循的规则或约定，包括三个基本要素：

- ~语法：实体之间交换信息的格式与结构~
- ~语义：实体之间叫喊的信息中需要发送（或包含）那些控制信息，这些信息的具体含义，以及针对不同含义的控制及信息，接收信息端如何响应~
- ~时序：实体之间交换信息的顺序以及如何匹配或适应彼此的速度~ 



**计算机网络的分类**

- ~覆盖范围：个域网、局域网、城域网、广域网~
- ~拓扑结构：星型、总线型、环形、网状、树形、混合拓扑结构~
- ~交换方式：电路交换网络、报文交换网络、分组交换网络~
- ~网络用户属性：公有网、私有网~



**拓扑结构**

- 总线型拓扑：是一种基于多点连接的拓扑结构，所有的设备连接在共同的传输介质上。总线拓扑结构使用一条所有PC都可访问的公共通道，每台PC只要连一条线缆即可但是它的缺点是所有的PC不得不共享线缆，优点是不会因为一条线路发生故障而使整个网络瘫痪。 

- 环行拓扑：把每台PC连接起来，数据沿着环依次通过每台PC直接到达目的地，在环行结构中每台PC都与另两台PC相连每台PC的接口适配器必须接收数据再传往另一台一台出错，整个网络会崩溃因为两台PC之间都有电缆，所以能获得好的性能。  



**交换技术**

- 电路交换：实时性高、信道利用率低
  - 两台主机建立一条**专用**的通信
- 报文交换：实时性低、信道利用率较高、对交换节点存储容量要求高
  - 以报文为单位在交换网络的各节点以存储-转发的方式传送。
- 分组交换：实时性次高、信道利用率高、对交换节点存储容量要求低
  - 分组交换将完整保温分成若干个分组，分组传输过程也采用存储-转发交换方式。



**网络的性能**

- 速率/传输率/带宽：单位时间内网络传送的数据量
- 时延：数据从网络的一个节点到另一个节点所需要的时间。
  - 分组传输主要产生4类时延：结点处理时延、排队时延、传输时延、传播时延 
  - 传输时延：`L=分组长度;R=链路带宽/s;`   $D_t=L\div R$
  - 传播时延：`D=物理链路长度m;V=信号传播速率m/s`$d_p=D \div V$
- 时延带宽积：表示一段链路可以容纳的数据位数
  - 一段物理链路的传播时延与链路带宽的乘积
  - $G=d_p \times R $
- 丢包率：丢包率常被用于评价和衡量网络性能的指标，在很大成都上可以反映网络的拥堵程度
  - $丢包率=丢失分组总数/发送分组总数$
- 吞吐量：单位时间内源主机通过网络向目的主机实际送达的数据量。 



**OSI参考模型**

1. 应用层：处理数据
2. 表示层：处理数据
3. 会话层：处理数据
4. 传输层：分段
5. 网络层：分组（数据报）
6. 数据链路层：帧
7. 物理层：比特流



**TCP/IP参考模型**

1. 应用层：HTTP、SMTP、DNS等
2. 运输层：TCP、UDP
3. 网际层：IP
4. 网络接口层：网络接口1、网络接口2



**五层参考模型**

1. 应用层：报文
2. 传输层：段
3. 网络层：数据报
4. 数据链路层：数据帧
5. 物理层：比特流



**计算机网络与因特网发展简史**

- 1969年，第一个网络：ARPAnet



## 网络应用

**重难点**

- 客户/服务器、P2P两种网络应用体系结构及各自的特点
- DNS的概念和工作原理
- 万维网应用结构和HTTP协议
- 电子邮件系统结构和协议







**计算机网络应用体系结构**

-  客户/服务器(C/S)：通信只在客户与服务器只见进行，客户与客户之间不进行直接通信。
- P2P(Peer to Peer)结构：每个对等端同时具备C/S应用的客户与服务器特征，对等端之间之间通信
- 混合结构：既有中心服务器的存在，又有对等端（客户）间的直接通信



**域名系统（DNS）**

- 域名解析：将域名映射为IP地址的过程。
- 域名服务器：为了实现域名解析，需要建立分布式数据库，存储网络中域名与IP地址的映射关系数据，这些数据库存储在域名服务器上，域名服务器根据用户的请i去提供域名解析服务器。
- 域名服务器分类：根域名服务器、顶级域名服务器、权威域名服务器、本地域名服务器



**域名解析过程**

- 递归查询：代替查询主机或其他域名服务器，进行下一步的域名查询，并将最终的解析结果发送给查询主机
- 迭代查询： 只要将下一步要查询的服务器告知查询主机



**超文本传输协议（HTTP）**

- 非持久连接
  - 串行方式：根据网页存在的资源数，一个个请求资源，每次请求都建立一个新连接并释放
  - 并行方式：根据网页存在的资源数，一次性请求N个资源，同时建立N个连接并释放
- 持久连接
  - 非流水方式持久连接：一开始建立一个TCP连接，后续复用这个TCP连接请求TCP连接，每次只请求一个资源
  - 流水方式持久连接：一开始建立一个TCP连接，后续复用这个TCP连接请求TCP连接，同时请求多个资源

![image-20220831084817049](/../assets/images/2021/2022-08-24-network/image-20220831084817049.png)

![image-20220831085546144](/../assets/images/2021/2022-08-24-network/image-20220831085546144.png)



**电子邮件发送协议**

SMTP是Internet电子邮件中核心应用层协议，SMTP使用TCP实现可靠数据传输，端口**25**

SMTP有三个阶段：握手阶段、邮件传输阶段、关闭阶段

SMTP通过关键字进行判断：To、Subject、Cc、From、Data、Replay-To等关键字

电子邮件不支持非ASCII码内容（中文），需要用MIME将非ASCII码内容转换成ASCII码进行传输

![image-20220831090908280](/../assets/images/2021/2022-08-24-network/image-20220831090908280.png)

**电子邮件收取协议**

- POP3：发指令给服务器，需要获取哪封邮件，然后将这封邮件下载到客户端，最终在客户端对邮件操作
- IMAP：连接到邮件服务器，所有对邮件操作都在邮件服务器上
- HTTP：不需要邮件客户端



**文件传送协议**

- FTP:在互联网的两个主机间实现文件互传的应用层协议
- C/S模式，采用控制连接（21端口）传输控制命令，数据连接（20端口）传输文件内容
  - 设计思想：两个端口不同分工，传输过程中，若想中断传输可以直接终端



**P2P应用**

> P2P应用的优势：充分利用端系统（对等方主机）的计算能力以及网络罗传输带宽，对服务器的依赖小

<img src="/../assets/images/2021/2022-08-24-network/image-20220831093233300.png" alt="image-20220831093233300" style="zoom:25%;" />





**Socket编程基础**

网络应用进程通信时需要通过API接口请求底层协议的服务。可以创建数据报类型套接字`SOCK_DGRAM、流式套接字SOCK_STREAM和原始套接字SOCK_RAW`

![image-20220831095510742](/../assets/images/2021/2022-08-24-network/image-20220831095510742.png)



**TCP **

![image-20220831095539923](/../assets/images/2021/2022-08-24-network/image-20220831095539923.png)

**UDP**

![image-20220831095624390](/../assets/images/2021/2022-08-24-network/image-20220831095624390.png)







## **传输层**

**传输层功能**

传输层协议提供**逻辑通信**服务

传输层协议只需在**端系统**中实现

通信的真正端点并不是主机，而是主机运行的**应用进程**

- 传输层寻址：确定是哪个应用
- 应用层报文的分段和重组：报文可能很大被分段，需要重组
- 报文的差错检测：报文是否缺失
- 进程的端到端可靠数据传输控制：应用进程是否收到报文的确认
- 面向应用层实现复用与分解：服务与应用层
- 端到端的流量控制：控制流量大小，流量过大处理不过来
- 拥塞控制：控制流量大小，流量过大网络处理不过来，需要减小或者解决



**传输层寻址与端口**

1. 用同意的寻址方法对应用进程进行标识 -- **端口号**
2. 在全网范围内利用 "**IP地址+端口号**" 唯一标识一个通信端点
3. 传输层端口号位16位整数，包含三类端口：
   1. **熟知端口号**：数值为0~1023
   2. **登记端口号**：数值为1024~49151，没有熟知端口号的应用程序使用的，使用这个端口号必须在IANA登记以防止重复
   3. **客户端口号或短暂端口号**：数值为49152~65535



**无连接服务于面向连接服务**

- 无连接服务（UDP）：数据传输之间无需与对端进行任何信息交换（即“握手”），直接构造传输层报文段并向接收端发送
- 面向连接服务（TCP）：在数据传输之前，需要双方交换一些控制信息，建立逻辑连接，然后再传输数据，数据传输结束后还需要再拆除连接。



**多路复用与多路分解**

传输层的一项基本功能，支持终端应用程序共用同一个传输层协议，并能够将接收到的数据准确交付给不同的应用进程。

- UDP套接字：`<目的IP地址， 目的端口号>`
  - UDP套接字的端口号是UDP实现复用与分解的重要依据
- TCP套接字（标识一条TCP连接）：`<源IP地址，源端口号，目的IP地址，目的端口号>`
  - 当一个TCP报文段从网络层到达一台主机时，该主机根据这4个值来将报文段分解到相应的套接字



**可靠数据传输基本原理**

实现可靠数据传输的措施：

- 差错检测：利用差错编码实现数据包传输过程中的比特差错检测
- 确认：接收方向发送方反馈接收状态
- 重传：发送方重新发送接收方没有正确接收的数据
- 序号：确保数据按序提交
- 计时器：解决数据丢失问题



**停-等协议**

停-等协议主要特点就是每发送一个报文段后就停下来等待接收方的确认。

停-等协议的基本工作过程时：

1. 发送方发送经过差错编码和编号的报文段，等待接收方的确认；（发送并等待确认
2. 接收方如果正确接收报文段，即差错检测无误且序号正确，则接收报文段，并向发送方发送ACK，否则丢弃报文段，并向发送方发送NAK；（接收并确认/否认）
3. 发送方如果收到ACK，则继续发送后续报文段，否则重发刚刚发送的报文段。（继续发送/重发）



**滑动窗口协议**

1. 停-等协议主要性能问题：停止-等待机制降低了信道利用率
2. 解决方法：流水线协议或管道协议--允许发送方再没有收到确认前连续发送多个分组。
3. 流水线协议的改进：
   1. 增加分组序号范围
   2. 发送方和接收方必须缓存多个分组
4. 典型的流水线协议：滑动窗口协议

![image-20220901100646527](/../assets/images/2021/2022-08-24-network/image-20220901100646527.png)



**两种最具有代表性的滑动窗口协议：**

回退N步（Go-Back-N，GBN）协议：

发送端窗口大小较大，可以在未得到确认前连续发送多个分组；但接收窗口大小仅为1，只能接收1个按序到大的分组，未按序到达的分组或某个分组差错，就会引来发送方重发该分组及其之后的所有分组。



选择重传（Selective Repeat， SR）协议：

增加接收方缓存能力（接收窗口>1）,缓存正确到达但失序的分组，仅要求发送方重传未被接收方确认的分组，等缺失分组到达后一并向上层按序提交。



#### **UDP**

用户数据报协议时Internet传输层协议，提供无连接、不可靠、数据报尽力传输服务



**报文结构**

源和目的端口号：用于UDP实现复用与分解

长度字段：在UDP报文段中的字节数（首部和数据的总和）

校验和：接收方用来检测该报文石佛普出错

![image-20220901101935877](/../assets/images/2021/2022-08-24-network/image-20220901101935877.png)



计算校验和：

- 对所有参与运算的内容（包含UDP报文段）按16位（16位对齐）求和；
- 求和过程中遇到的任何溢出（即进位）都被回卷（即进位与和的最低为再加）
- 最后得到的和取反码



#### TCP

![image-20220901103551540](/../assets/images/2021/2022-08-24-network/image-20220901103551540.png)





**三次握手**

1. SYN连接请求
2. SYNACK确认
3. ACK确认 

![image-20220901105228011](/../assets/images/2021/2022-08-24-network/image-20220901105228011.png)























### 计算机网络的基本概念

**一、计算机网络的定义**

> 计算机网络是利用通信设备与通信链路或者通信网络，互连位置不同、功能自治的计算机系统，并遵循一定的规则实现计算机系统之间信息交换。
>
> 概括性的定义：计算机网络是互连的、自治的计算机网路的集合。
>
> 早期时出现过一种网络，终端只有显示器和键盘，这些是交互的输入输出设备，它们通过通信链路连接到主机，所有信息都要传递到主机进行处理。如果把通信链路断开，仅仅依靠终端是没办法独立工作。

 **互连：**所有计算机都要连接在一起

**自治：**有自己的硬件和软件，能够独立的工作，在脱离网络的情况下也能够进行一定的信息处理

家庭网络，公司网络访问互联网需要使用ISP（移动、电信等）提供的服务

**二、协议的定义**

> 协议是网络通信实体之间在数据交换过程中需要遵循的规则或约定，包括三个基本要素：

- ~语法：实体之间交换信息的格式与结构~
- ~语义：实体之间叫喊的信息中需要发送（或包含）那些控制信息，这些信息的具体含义，以及针对不同含义的控制及信息，接收信息端如何响应~
- ~时序：实体之间交换信息的顺序以及如何匹配或适应彼此的速度~ 

**三、计算机网络的功能**

- 硬件资源共享
- 软件资源共享
- 信息资源共享

**四、计算机网络的分类**

- *按覆盖范围*：个域网、局域网、城域网、广域网
- *按拓扑结构*：星形、总线型、环形、网状、树形、混合拓扑结构等
- *按交换方式：*电路交换网络、报文交换网络和分组交换网络
- *按网络用户属性：*公有网、私有网

**拓扑**

- *星形拓扑：*所有的设备连接一个中心节点，数据传输由中心节点进行
  
  - > 所有信息传输到中心节点，然后中心节点发送到目的地
    
  - 优点：易于管理、出现故障容易定位
  - 缺点：所有节点通信依赖于中心节点，中心节点有问题网络瘫痪
  
- 总线型拓扑：所有的设备连接一条总线，数据传输由总线进行
  
  - > 采用一条广播信道作为公共传输介质。任一节点发送数据时，其他节点都会接收到承载这些数据的信号。如果由两个或以上的节点同时发送数据就会发生干扰，会导致任一节点数据发送失败，这一现象称为冲突
    
  - 优点：构造简单
  - 缺点：性能不高，出现故障定位困难，故障不容易隔离
  
-  环形拓扑：所有的设备连接一条环形线路 （封闭）
  
  - > 一个节点发送数据，数据延着特定传输。如果某节点判断数据是发送给自己的，则复制一份数据。发送数据的结点负责从环中清除自己发送的数据
  
  - 优点：构造简单
  - 缺点：节点加入或退出困难，出现问题定位较为困难，易于避免冲突
  
- 网状拓扑：所有节点都会有线路相连（两两之间） 

  - 优点：两个节点通信时有很多路径可以选择
  - 缺点：构造困难，网络很复杂，构造成本大

- 树状拓扑：多个星形结构
  
  - 优缺点：参考星形结构
  
- 混合拓扑：多种拓扑类型混合
  
  - 优缺点：兼有上面拓扑的特点，但是管理起来较为复杂

![image-20210728080749988](/../assets/images/2021/2021-06-01-network/image-20210728080749988.png)



### 数据交换的概念

> 交换节点和传输介质的集合称为通信子网，既网络核心

- 交换节点：交换机、路由器等设备

- 传输介质：网线等

**电路交换**

> 在电路交换网络中，首席按需要通过中间交换节点为两台主机之间简历专用的通信线路，称为电路，然后再利用该电路进行通信，通信结束后在拆除电路。

- 优点是**实时性高**，时延和时延抖动都较小；

- > 解：中间交换节点为两台主机建立一条专用的通信线路，只有这两台主机传输数据才能使用，没人和你抢占发送。VIP通道

- 缺点是对于突发性数据传输，**信道利用率低**，且传输速率单一。

- > 解：一条通道只服务于两台主机之间，其他主机需要传输数据就要再次新建信道，浪费资源

**报文交换**

> 以报文为单位在交换网络的各节点之间以存储-转发的方式传送。

- 不需要建立连接；
- 只有当报文被转发时才占用相应的信道；
- 交换节点需要**缓冲存储**，报文需要排队，增加时延

- > 解：A交换给C，需要先经过中间节点B（一个或者多个）。A给B，B缓冲报文，B缓冲完成后发送报文给C。

**分组交换**

> 分组及交换将一个完整报文拆分肉干个分组，分组传输过程通常也采用存储-转发交换方式
>
> 解：与报文交换的是一种模式，只是把一个报文拆成多个分组了

- 优点：
  - <u>交换设备存储容量要求低</u>；解：相比缓存整个报文，只缓存报文的一部分，这容量要求无疑是低了
  - <u>交换速度快</u>；解：原来你需要等整个报文都存储才转发，现在就只需要接收完一部分就转发
  - <u>可靠传输效率高</u>：  解：报文出错（哪怕只有一个位），整个报文需要重新发送。分组出错只需要重发出错的分组即可。
  - <u>更加公平</u>：解：当传输完一个**分组**后，信道空闲，有其他设备的分组需要传输，就可以直接传输。不像电路交换。只有两台主机使用信道。

- 分组长度的确定：

  - 分组长度与延迟时间：**适中**

    - > 解：分组长的情况下，增加了存储时间，导致了传输时间过长

    - > 解：分组短的情况下，分组传输时需要附加信息（分组长度，传输完成没等信息），分得越小,额外的信息也就越多，同样导致传输时间过长

  - 分组长度与误码率

    - 误码率（BER：biterror）是衡量数据在规定时间内数据传输精确性的指标。$误码率=传输中的误码/所传输的总码数\times100%$。如果有误码就有误码率。

    - 比特差错（英语：bit errors）的数量就是接收到的信道中数据流由于噪声、干扰、有损或比特同步错误而更改的比特的数量

    - > 解：误码率越低，分组长度可以越长。出错时只需要传输一个短的分组比传输一个长的分组来划算。





